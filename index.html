<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tetorisu MVP</title>
  </head>
  <body>
    <div id="app" data-screen="intro">
      <section
        id="start-screen"
        class="start-screen"
        aria-label="ゲームの導入"
        aria-hidden="false"
      >
        <h1 class="app-title">Tetorisu Party!</h1>
        <div class="start-copy">
          <p>スペシャルブロックでラインを消して、アイテムを獲得しよう！</p>
          <ul class="control-list">
            <li>← →：移動</li>
            <li>↓：ハードドロップ</li>
            <li>Space：回転</li>
            <li>C / Shift：ホールド</li>
            <li>1〜3：アイテム使用</li>
          </ul>
        </div>
        <div class="start-actions">
          <button
            id="start-button"
            type="button"
            class="start-button"
            aria-label="ゲームを開始する"
          >
            ゲームスタート
          </button>
          <button
            id="howto-button"
            type="button"
            class="start-button start-button--secondary"
            aria-label="遊び方の説明を見る"
          >
            遊び方について
          </button>
        </div>
      </section>
      <section
        id="howto-screen"
        class="howto-screen"
        aria-label="遊び方"
        aria-hidden="true"
        hidden
      >
        <header class="howto-header">
          <h2 class="howto-title">遊び方</h2>
          <button
            id="back-to-start"
            type="button"
            class="howto-back-button"
            aria-label="トップページに戻る"
          >
            戻る
          </button>
        </header>
        <div class="howto-content">
          <section class="howto-section" aria-labelledby="howto-goal">
            <h3 id="howto-goal">ゲームの目的</h3>
            <p>
              ブロックを積み上げ、横一列をそろえて消していきます。特殊な光るブロックで
              ラインを消すと、スコアが2倍になりアイテムを獲得できます。
            </p>
          </section>
          <section class="howto-section" aria-labelledby="howto-controls">
            <h3 id="howto-controls">スマホ操作</h3>
            <ul>
              <li>タップ：右回転</li>
              <li>長押し（約0.35秒）：左回転</li>
              <li>左右スワイプ：移動</li>
              <li>下スワイプ：ハードドロップ</li>
              <li>Holdボタン：ホールド</li>
              <li>Itemsボタン：アイテム使用</li>
            </ul>
          </section>
          <section class="howto-section" aria-labelledby="howto-score">
            <h3 id="howto-score">スコア</h3>
            <ul>
              <li>1ライン：100点</li>
              <li>2ライン：300点</li>
              <li>3ライン：500点</li>
              <li>4ライン：800点</li>
              <li>連続で消すとコンボボーナス（2コンボ以上で+50点×(コンボ-1)）</li>
              <li>スペシャルブロックでラインを消すとスコア2倍</li>
              <li>ブースト中はスコア2倍</li>
              <li>10ライン消すごとにレベルアップ</li>
            </ul>
          </section>
          <section class="howto-section" aria-labelledby="howto-items">
            <h3 id="howto-items">アイテム</h3>
            <p>
              スペシャルブロックを含むライン消去でランダムに獲得（最大3つ）できます。
            </p>
            <ul>
              <li>ボム：下の2段をまとめて消去</li>
              <li>シャッフル：NEXTキューを再配置</li>
              <li>フリーズ：しばらく落下スピードを低下</li>
              <li>ブースト：しばらくスコア2倍</li>
            </ul>
          </section>
        </div>
      </section>
      <main
        id="game-screen"
        class="game-layout"
        role="application"
        aria-hidden="true"
        hidden
        aria-labelledby="playfield-label"
      >
        <section class="playfield" aria-labelledby="playfield-label">
          <h2 id="playfield-label" class="visually-hidden">ゲームフィールド</h2>
          <canvas id="playfield" width="360" height="720" aria-label="テトリスの盤面"></canvas>
        </section>
        <aside class="sidebar" aria-labelledby="sidebar-label">
          <h2 id="sidebar-label" class="visually-hidden">ステータスパネル</h2>
          <section class="hold" aria-labelledby="hold-label">
            <div class="panel-header">
              <h3 id="hold-label" class="section-title">Hold</h3>
              <button id="hold-button" type="button" class="hold-button" aria-label="ホールド">
                Hold
              </button>
            </div>
            <canvas id="hold-preview" width="128" height="128" aria-label="ホールド中のミノ"></canvas>
          </section>
          <section class="next" aria-labelledby="next-label">
            <h3 id="next-label" class="section-title">Next</h3>
            <canvas id="next-preview" width="128" height="256" aria-label="次のミノ"></canvas>
          </section>
          <section class="hud" aria-labelledby="score-label">
            <div class="hud__header">
              <h3 id="score-label" class="section-title">Stats</h3>
              <button id="pause-toggle" type="button" class="pause-button" aria-label="ポーズを切り替える">
                Pause
              </button>
            </div>
            <dl class="stats" aria-live="polite" aria-atomic="true">
              <div class="stat">
                <dt>Score</dt>
                <dd id="score-value">0</dd>
              </div>
              <div class="stat">
                <dt>Lines</dt>
                <dd id="lines-value">0</dd>
              </div>
              <div class="stat">
                <dt>Level</dt>
                <dd id="level-value">1</dd>
              </div>
              <div class="stat">
                <dt>Combo</dt>
                <dd id="combo-value">0</dd>
              </div>
            </dl>
            <div class="items-panel" aria-labelledby="items-label">
              <h4 id="items-label" class="panel-title">Items</h4>
              <div class="items" role="list">
                <button class="item-card" type="button" data-item-slot="0" aria-label="アイテムスロット1">
                  <span class="item-card__name">空</span>
                  <span class="item-card__meta">1</span>
                </button>
                <button class="item-card" type="button" data-item-slot="1" aria-label="アイテムスロット2">
                  <span class="item-card__name">空</span>
                  <span class="item-card__meta">2</span>
                </button>
                <button class="item-card" type="button" data-item-slot="2" aria-label="アイテムスロット3">
                  <span class="item-card__name">空</span>
                  <span class="item-card__meta">3</span>
                </button>
              </div>
            </div>
            <div class="effects-panel" aria-labelledby="effects-label">
              <h4 id="effects-label" class="panel-title">Effects</h4>
              <div id="effect-list" class="effect-list"></div>
            </div>
          </section>
        </aside>
      </main>
      <div id="orientation-guard" role="alert">
        <p>縦向きでプレイしてください</p>
      </div>
    </div>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
